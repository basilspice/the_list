{"ast":null,"code":"import _regeneratorRuntime from\"/home/basil/Projects/The_List/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/basil/Projects/The_List/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/basil/Projects/The_List/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import MainScreen from\"../../components/MainScreen\";import axios from\"axios\";import{Button,Card,Form}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import{deleteListAction,updateListAction}from\"../../actions/listsActions\";import ErrorMessage from\"../../components/ErrorMessage\";import Loading from\"../../components/Loading\";import ReactMarkdown from\"react-markdown\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SingleList(_ref){var match=_ref.match,history=_ref.history;var _useState=useState(),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),category=_useState6[0],setCategory=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),date=_useState8[0],setDate=_useState8[1];var dispatch=useDispatch();var listUpdate=useSelector(function(state){return state.listUpdate;});var loading=listUpdate.loading,error=listUpdate.error;var listDelete=useSelector(function(state){return state.listDelete;});var loadingDelete=listDelete.loading,errorDelete=listDelete.error;var deleteHandler=function deleteHandler(id){if(window.confirm(\"Are you sure?\")){dispatch(deleteListAction(id));}history.push(\"/mylists\");};useEffect(function(){var fetching=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/lists/\".concat(match.params.id));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setTitle(data.title);setContent(data.content);setCategory(data.category);setDate(data.updatedAt);case 8:case\"end\":return _context.stop();}}},_callee);}));return function fetching(){return _ref2.apply(this,arguments);};}();fetching();},[match.params.id,date]);var resetHandler=function resetHandler(){setTitle(\"\");setCategory(\"\");setContent(\"\");};var updateHandler=function updateHandler(e){e.preventDefault();dispatch(updateListAction(match.params.id,title,content,category));if(!title||!content||!category)return;resetHandler();history.push(\"/mylists\");};return/*#__PURE__*/_jsx(MainScreen,{title:\"Edit List\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:\"Edit your List\"}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:updateHandler,children:[loadingDelete&&/*#__PURE__*/_jsx(Loading,{}),error&&/*#__PURE__*/_jsx(ErrorMessage,{variant:\"danger\",children:error}),errorDelete&&/*#__PURE__*/_jsx(ErrorMessage,{variant:\"danger\",children:errorDelete}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"title\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Title\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"title\",placeholder:\"Enter the title\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"content\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Content\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",placeholder:\"Enter the content\",rows:4,value:content,onChange:function onChange(e){return setContent(e.target.value);}})]}),content&&/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:\"List Preview\"}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(ReactMarkdown,{children:content})})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"content\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Category\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"content\",placeholder:\"Enter the Category\",value:category,onChange:function onChange(e){return setCategory(e.target.value);}})]}),loading&&/*#__PURE__*/_jsx(Loading,{size:50}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Update List\"}),/*#__PURE__*/_jsx(Button,{className:\"mx-2\",variant:\"danger\",onClick:function onClick(){return deleteHandler(match.params.id);},children:\"Delete List\"})]})}),/*#__PURE__*/_jsxs(Card.Footer,{className:\"text-muted\",children:[\"Updated on - \",date.substring(0,10)]})]})});}export default SingleList;","map":{"version":3,"names":["React","useEffect","useState","MainScreen","axios","Button","Card","Form","useDispatch","useSelector","deleteListAction","updateListAction","ErrorMessage","Loading","ReactMarkdown","SingleList","match","history","title","setTitle","content","setContent","category","setCategory","date","setDate","dispatch","listUpdate","state","loading","error","listDelete","loadingDelete","errorDelete","deleteHandler","id","window","confirm","push","fetching","get","params","data","updatedAt","resetHandler","updateHandler","e","preventDefault","target","value","substring"],"sources":["/home/basil/Projects/The_List/frontend/src/screens/SingleList/SingleList.js"],"sourcesContent":["\n\nimport React, { useEffect, useState } from \"react\";\nimport MainScreen from \"../../components/MainScreen\";\nimport axios from \"axios\";\nimport { Button, Card, Form } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { deleteListAction, updateListAction } from \"../../actions/listsActions\";\nimport ErrorMessage from \"../../components/ErrorMessage\";\nimport Loading from \"../../components/Loading\";\nimport ReactMarkdown from \"react-markdown\";\n\nfunction SingleList({ match, history }) {\n  const [title, setTitle] = useState();\n  const [content, setContent] = useState();\n  const [category, setCategory] = useState();\n  const [date, setDate] = useState(\"\");\n\n  const dispatch = useDispatch();\n\n  const listUpdate = useSelector((state) => state.listUpdate);\n  const { loading, error } = listUpdate;\n\n  const listDelete = useSelector((state) => state.listDelete);\n  const { loading: loadingDelete, error: errorDelete } = listDelete;\n\n  const deleteHandler = (id) => {\n    if (window.confirm(\"Are you sure?\")) {\n      dispatch(deleteListAction(id));\n    }\n    history.push(\"/mylists\");\n  };\n\n\n  \n  useEffect(() => {\n    const fetching = async () => {\n      const { data } = await axios.get(`/api/lists/${match.params.id}`);\n\n      setTitle(data.title);\n      setContent(data.content);\n      setCategory(data.category);\n      setDate(data.updatedAt);\n    };\n\n    fetching();\n  }, [match.params.id, date]);\n\n  const resetHandler = () => {\n    setTitle(\"\");\n    setCategory(\"\");\n    setContent(\"\");\n  };\n\n  const updateHandler = (e) => {\n    e.preventDefault();\n    dispatch(updateListAction(match.params.id, title, content, category));\n    if (!title || !content || !category) return;\n\n    resetHandler();\n    history.push(\"/mylists\");\n  };\n\n  return (\n    <MainScreen title=\"Edit List\">\n      <Card>\n        <Card.Header>Edit your List</Card.Header>\n        <Card.Body>\n          <Form onSubmit={updateHandler}>\n            {loadingDelete && <Loading />}\n            {error && <ErrorMessage variant=\"danger\">{error}</ErrorMessage>}\n            {errorDelete && (\n              <ErrorMessage variant=\"danger\">{errorDelete}</ErrorMessage>\n            )}\n            <Form.Group controlId=\"title\">\n              <Form.Label>Title</Form.Label>\n              <Form.Control\n                type=\"title\"\n                placeholder=\"Enter the title\"\n                value={title}\n                onChange={(e) => setTitle(e.target.value)}\n              />\n            </Form.Group>\n\n            <Form.Group controlId=\"content\">\n              <Form.Label>Content</Form.Label>\n              <Form.Control\n                as=\"textarea\"\n                placeholder=\"Enter the content\"\n                rows={4}\n                value={content}\n                onChange={(e) => setContent(e.target.value)}\n              />\n            </Form.Group>\n            {content && (\n              <Card>\n                <Card.Header>List Preview</Card.Header>\n                <Card.Body>\n                  <ReactMarkdown>{content}</ReactMarkdown>\n                </Card.Body>\n              </Card>\n            )}\n\n            <Form.Group controlId=\"content\">\n              <Form.Label>Category</Form.Label>\n              <Form.Control\n                type=\"content\"\n                placeholder=\"Enter the Category\"\n                value={category}\n                onChange={(e) => setCategory(e.target.value)}\n              />\n            </Form.Group>\n            {loading && <Loading size={50} />}\n            <Button variant=\"primary\" type=\"submit\">\n              Update List\n            </Button>\n            <Button\n              className=\"mx-2\"\n              variant=\"danger\"\n              onClick={() => deleteHandler(match.params.id)}\n            >\n              Delete List\n            </Button>\n          </Form>\n        </Card.Body>\n\n        <Card.Footer className=\"text-muted\">\n          Updated on - {date.substring(0, 10)}\n        </Card.Footer>\n      </Card>\n    </MainScreen>\n  );\n}\n\nexport default SingleList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}